import{u as S,R as w,r as m,F as b,a as g,M as G,b as H,c as B,m as l,I as T,j as y,E as _,d as n,C as Z,e as z,g as j,T as O,f as U,h as K,i as V,k as P,l as F,n as q,o as J,p as Q,P as W,q as Y,s as k,t as $,v as ee,w as te,x as se,y as ue,z as ae,A as oe,B as ne,D as ce,G as de,H as ie,J as re,K as le,L as Ee,N as me,O as pe,Q as Ae,S as Te,U as ge,V as De,W as v,X as Se,Y as fe}from"./index.897d7c93.js";function Ie(){const{permissions:f}=S(P),e=f.get(w.MATERIALS),d=S(F),[{baseMaterial:u,extMaterialIndex:D},i]=m.exports.useState({baseMaterial:b.DSP,extMaterialIndex:0}),c=g(q),I=g(J),C=g(Q),L=m.exports.useMemo(()=>(d.filter(s=>s.material===u)||[{name:"",material:""}]).toSorted((s,t)=>s.name>t.name?1:-1),[d,u]),E=L[D]||{name:"",code:"",image:"",material:b.DSP,purpose:G.BOTH},M=H(E.material,E.name),x=(E==null?void 0:E.material)===b.DSP,p=["\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435","\u041A\u043E\u0434","\u041D\u0430\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"],o=L.map(s=>[s.name,s.code,B.get(s.purpose)||""]),r=[{caption:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435:",value:E.name||"",message:l.ENTER_CAPTION,type:T.TEXT},{caption:"\u041A\u043E\u0434:",value:E.code,message:l.ENTER_CODE,type:T.TEXT},{caption:"\u041D\u0430\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435:",value:E.purpose||"",valueCaption:s=>B.get(s)||"",list:B,message:l.ENTER_PURPOSE,type:T.LIST,readonly:!x},{caption:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435:",value:M||"",message:l.ENTER_IMAGE,type:T.FILE}];return y(_,{children:[y("div",{children:[n("div",{className:"d-flex flex-nowrap gap-2 align-items-start",children:n(Z,{title:"\u041C\u0430\u0442\u0435\u0440\u0438\u0430\u043B: ",value:u,items:z,onChange:(s,t)=>{i(a=>({...a,baseMaterial:j(t),extMaterialIndex:0}))}})}),n("hr",{}),n(O,{heads:p,content:o,onSelectRow:s=>{i(t=>({...t,extMaterialIndex:s}))}})]}),(e==null?void 0:e.create)||(e==null?void 0:e.update)||(e==null?void 0:e.remove)?n(U,{name:E.name,items:r,onUpdate:e!=null&&e.update?async(s,t)=>{const a=s[0]?t[0]:"",A=s[1]?t[1]:"",R=s[2]?t[2]:G.FASAD,N=s[3]?t[3]:"";return await C({name:E.name,material:u,newName:a,newCode:A,image:N,purpose:R})}:void 0,onDelete:e!=null&&e.remove?async()=>{const s=await c(E);return i(t=>({...t,extMaterialIndex:0})),s}:void 0,onAdd:e!=null&&e.create?async(s,t)=>{const a=t[0],A=t[1],R=K(t[2]),N=t[3];return V(a,u,d)?{success:!1,message:l.MATERIAL_EXIST}:await I({name:a,material:u,code:A,image:"",purpose:R},N)}:void 0}):n("div",{})]})}function xe(){const{permissions:f}=S(P),e=f.get(w.MATERIALS),d=S(Y),[{type:u,profileIndex:D},i]=m.exports.useState({type:d[0].type,profileIndex:0}),c=d.filter(s=>s.type===u),I=S(k),C=m.exports.useMemo(()=>I.map(s=>s.name).toSorted(),[I]);m.exports.useMemo(()=>{i({type:d[0].type,profileIndex:0})},[d]);const L=g($),E=g(ee),M=g(te),x=c[D],p=["\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435","\u041A\u043E\u0434","\u0429\u0435\u0442\u043A\u0430"],o=c.map(s=>[s.name,s.code,s.brush]),r=[{caption:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435:",value:x.name,message:l.ENTER_CAPTION,type:T.TEXT},{caption:"\u041A\u043E\u0434:",value:x.code,message:l.ENTER_CODE,type:T.TEXT},{caption:"\u0429\u0435\u0442\u043A\u0430:",value:x.brush,list:C,message:l.ENTER_BRUSH,type:T.LIST}];return y(_,{children:[y("div",{children:[n("div",{className:"d-flex flex-nowrap gap-2 align-items-start",children:n(Z,{title:"\u0422\u0438\u043F: ",value:u||"",items:W,onChange:(s,t)=>{i({type:t,profileIndex:0})}})}),n("hr",{}),n(O,{heads:p,content:o,onSelectRow:s=>{i(t=>({...t,profileIndex:s}))}})]}),(e==null?void 0:e.create)||(e==null?void 0:e.update)||(e==null?void 0:e.remove)?n(U,{name:x.name,items:r,onUpdate:e!=null&&e.update?async(s,t)=>{const a=s[0]?t[0]:"",A=s[1]?t[1]:"",R=s[2]?t[2]:"";return await M({name,type:u,newName:a,newCode:A,newBrush:R})}:void 0,onDelete:e!=null&&e.remove?async()=>{const s=await L(x);return i(t=>({...t,profileIndex:0})),s}:void 0,onAdd:e!=null&&e.create?async(s,t)=>{const a=t[0],A=t[1],R=t[2];return c.find(h=>h.name===a&&h.type===u)?{success:!1,message:l.MATERIAL_EXIST}:await E({name:a,type:u,code:A,brush:R})}:void 0}):n("div",{})]})}function Re(){const{permissions:f}=S(P),e=f.get(w.MATERIALS),d=S(se),u=m.exports.useMemo(()=>d.toSorted((t,a)=>(t==null?void 0:t.name)>(a==null?void 0:a.name)?1:-1),[d]),D=S(F),i=m.exports.useMemo(()=>D.filter(t=>t.material===b.DSP).map(t=>t.name),[D]),[c,I]=m.exports.useState(0),{name:C,dsp:L,code:E}=u[c]||{name:"",dsp:"",code:""},M=g(ue),x=g(ae),p=g(oe),o=["\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435","\u041A\u043E\u0434","\u0421\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435 \u0414\u0421\u041F"],r=u.map(t=>[t.name,t.code,t.dsp]),s=[{caption:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435:",value:C||"",message:l.ENTER_CAPTION,type:T.TEXT},{caption:"\u041A\u043E\u0434:",value:E,message:l.ENTER_CODE,type:T.TEXT},{caption:"\u0421\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435 \u0414\u0421\u041F:",value:L,list:i,message:l.ENTER_CORRESPOND,type:T.LIST}];return y(_,{children:[n(O,{heads:o,content:r,onSelectRow:t=>{I(t)}}),(e==null?void 0:e.create)||(e==null?void 0:e.update)||(e==null?void 0:e.remove)?n(U,{name:C,items:s,onUpdate:e!=null&&e.update?async(t,a)=>{const A=t[0]?a[0]:"",R=t[1]?a[1]:"",N=t[2]?a[2]:"";return await p({name:u[c].name,newName:A,code:R,dsp:N})}:void 0,onDelete:e!=null&&e.remove?async t=>{const a=u.findIndex(R=>R.name===t),A=await M(u[a]);return I(0),A}:void 0,onAdd:e!=null&&e.create?async(t,a)=>{const A=a[0],R=a[1],N=a[2];return u.find(X=>X.name===A)?{success:!1,message:l.MATERIAL_EXIST}:await x({name:A,dsp:N,code:R})}:void 0}):n("div",{})]})}function Ce(){const{permissions:f}=S(P),e=f.get(w.MATERIALS),d=S(ne),u=m.exports.useMemo(()=>d.toSorted((t,a)=>t.name>a.name?1:-1),[d]),D=S(F),[i,c]=m.exports.useState(0),I=m.exports.useMemo(()=>D.filter(t=>t.material===b.DSP).map(t=>t.name),[D]),{name:C,dsp:L,code:E}=u[i]||{name:"",dsp:"",code:""},M=g(ce),x=g(de),p=g(ie),o=["\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435","\u041A\u043E\u0434","\u0421\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435 \u0414\u0421\u041F"],r=u.map(t=>[t.name,t.code,t.dsp]),s=[{caption:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435:",value:C||"",message:l.ENTER_CAPTION,type:T.TEXT},{caption:"\u041A\u043E\u0434:",value:E,message:l.ENTER_CODE,type:T.TEXT},{caption:"\u0421\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435 \u0414\u0421\u041F:",value:L,list:I,message:l.ENTER_CORRESPOND,type:T.LIST}];return m.exports.useEffect(()=>{c(0)},[u]),y(_,{children:[n(O,{heads:o,content:r,onSelectRow:t=>{c(t)}}),(e==null?void 0:e.create)||(e==null?void 0:e.update)||(e==null?void 0:e.remove)?n(U,{name:C,items:s,onUpdate:e!=null&&e.update?async(t,a)=>{const A=t[0]?a[0]:"",R=t[1]?a[1]:"",N=t[2]?a[2]:"";return await p({name:C,newName:A,code:R,dsp:N})}:void 0,onDelete:e!=null&&e.remove?async()=>{const t=await M(u[i]);return c(0),t}:void 0,onAdd:e!=null&&e.create?async(t,a)=>{const A=a[0],R=a[1],N=a[2];return u.find(X=>X.name===A)?{success:!1,message:l.MATERIAL_EXIST}:await x({name:A,dsp:N,code:R})}:void 0}):n("div",{})]})}function Le(){const{permissions:f}=S(P),e=f.get(w.MATERIALS),d=S(k),u=m.exports.useMemo(()=>d.toSorted((o,r)=>o.name>r.name?1:-1),[d]),[D,i]=m.exports.useState(0),{name:c,code:I}=u[D]||{name:"",code:""},C=g(re),L=g(le),E=g(Ee),M=["\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435","\u041A\u043E\u0434"],x=u.map(o=>[o.name,o.code]),p=[{caption:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435:",value:c,message:l.ENTER_CAPTION,type:T.TEXT},{caption:"\u041A\u043E\u0434:",value:I,message:l.ENTER_CODE,type:T.TEXT}];return m.exports.useEffect(()=>{i(0)},[u]),y(_,{children:[n(O,{heads:M,content:x,onSelectRow:o=>{i(o)}}),(e==null?void 0:e.create)||(e==null?void 0:e.update)||(e==null?void 0:e.remove)?n(U,{name:c,items:p,onUpdate:e!=null&&e.update?async(o,r)=>{const s=o[0]?r[0]:"",t=o[1]?r[1]:"";return await E({name:c,newName:s,code:t})}:void 0,onDelete:e!=null&&e.remove?async o=>{const r=u.findIndex(t=>t.name===o),s=await C(u[r]);return i(0),s}:void 0,onAdd:e!=null&&e.create?async(o,r)=>{const s=r[0],t=r[1];return u.find(A=>A.name===s)?{success:!1,message:l.MATERIAL_EXIST}:await L({name:s,code:t})}:void 0}):n("div",{})]})}function Me(){const{permissions:f}=S(P),e=f.get(w.MATERIALS),d=S(me),u=m.exports.useMemo(()=>d.toSorted((p,o)=>p.caption>o.caption?1:-1),[d]),[D,i]=m.exports.useState(0),{name:c,caption:I,code:C}=u[D]||{name:"",caption:"",code:""},L=g(pe),E=["\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435","\u041A\u043E\u0434"],M=u.map(p=>[p.caption,p.code]),x=[{caption:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435:",value:I,message:l.ENTER_CAPTION,type:T.TEXT},{caption:"\u041A\u043E\u0434:",value:C,message:l.ENTER_CODE,type:T.TEXT}];return m.exports.useEffect(()=>{i(0)},[d]),y(_,{children:[n(O,{heads:E,content:M,onSelectRow:p=>{i(p)}}),(e==null?void 0:e.create)||(e==null?void 0:e.update)||(e==null?void 0:e.remove)?n(U,{name:c,items:x,onUpdate:e!=null&&e.update?async(p,o)=>{const r=p[0]?o[0]:"",s=p[1]?o[1]:"";return await L({name:c,caption:r,code:s})}:void 0}):n("div",{})]})}function Ne(){const{permissions:f}=S(P),e=f.get(w.MATERIALS),d=S(Ae),u=m.exports.useMemo(()=>d.toSorted((o,r)=>o.name>r.name?1:-1),[d]),[D,i]=m.exports.useState(0),{name:c,code:I}=u[D]||{name:"",code:""},C=g(Te),L=g(ge),E=g(De),M=["\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435","\u041A\u043E\u0434"],x=u.map(o=>[o.name,o.code]),p=[{caption:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435:",value:c||"",message:l.ENTER_CAPTION,type:T.TEXT},{caption:"\u041A\u043E\u0434:",value:I,message:l.ENTER_CODE,type:T.TEXT}];return m.exports.useEffect(()=>{i(0)},[d]),y(_,{children:[n(O,{heads:M,content:x,onSelectRow:o=>{i(o)}}),(e==null?void 0:e.create)||(e==null?void 0:e.update)||(e==null?void 0:e.remove)?n(U,{name:c,items:p,onUpdate:e!=null&&e.update?async(o,r)=>{const s=o[0]?r[1]:"",t=o[1]?r[2]:"";return await E({name:c,code:s,caption:t})}:void 0,onDelete:e!=null&&e.remove?async()=>{const o=await C(u[D]);return i(0),o}:void 0,onAdd:async(o,r)=>{const s=r[0];return u.find(a=>a.name===c)?{success:!1,message:l.MATERIAL_EXIST}:await L({name:c,code:s})}}):n("div",{})]})}function ve(){const{permissions:f}=S(P),e=f.get(w.PRICES),[d,u]=m.exports.useState(v.PLATE),D=[...Se.entries()].map((c,I)=>n("div",{className:d===c[0]?"tab-button-active":"tab-button-inactive",onClick:()=>{u(c[0])},role:"button",children:c[1]},I)),i=ye(d);return m.exports.useEffect(()=>{e!=null&&e.read||window.location.replace("/")},[e]),y("div",{className:"database-edit-container",children:[n("div",{className:"tab-header-container",children:D}),i]})}function ye(f){return{[v.PLATE]:n(Ie,{}),[v.PROFILE]:n(xe,{}),[v.EDGE]:n(Re,{}),[v.ZAGLUSHKI]:n(Ce,{}),[v.BRUSH]:n(Le,{}),[v.TREMPEL]:n(Me,{}),[v.UPLOTNITEL]:n(Ne,{})}[f]||n(fe,{})}export{ve as default};
