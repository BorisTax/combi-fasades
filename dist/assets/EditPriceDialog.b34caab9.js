import{u as c,R as N,a as D,r as n,Z as U,m as r,I as p,_ as f,j as _,E as $,d,T as k,f as v,k as w,$ as M,a0 as O,a1 as j,a2 as V}from"./index.6fe608a6.js";function B(){const{permissions:P}=c(w),t=P.get(N.PRICES),E=D(M),m=c(O),i=c(j),u=n.exports.useMemo(()=>m.map(e=>{var a,s;return{...e,units:((a=i.find(o=>o.name===e.name))==null?void 0:a.units)||"",caption:((s=i.find(o=>o.name===e.name))==null?void 0:s.caption)||""}}),[m,i]),[T,y]=n.exports.useState(0),l={name:"",caption:"",price:"",markup:""},{name:I,caption:R,price:A,markup:x}=u&&u[T]?{...u[T]||l}:l,S=D(V),C=["\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435","\u0415\u0434","\u0426\u0435\u043D\u0430","\u041D\u0430\u0446\u0435\u043D\u043A\u0430"],L=u.map(e=>[e.caption||"",U.get(e.units||"")||"",`${e.price||""}`,`${e.markup||""}`]),g=[{caption:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435:",value:R||"",message:r.ENTER_CAPTION,type:p.TEXT,readonly:!0},{caption:"\u0426\u0435\u043D\u0430:",value:`${A}`,message:r.ENTER_PRICE,type:p.TEXT,propertyType:f.POSITIVE_NUMBER},{caption:"\u041D\u0430\u0446\u0435\u043D\u043A\u0430:",value:`${x}`,message:r.ENTER_MARKUP,type:p.TEXT,propertyType:f.POSITIVE_NUMBER}];return n.exports.useEffect(()=>{E()},[E]),n.exports.useEffect(()=>{t!=null&&t.read||window.location.replace("/")},[t]),_($,{children:[d(k,{heads:C,content:L,onSelectRow:e=>y(e)}),(t==null?void 0:t.create)||(t==null?void 0:t.update)||(t==null?void 0:t.remove)?d(v,{items:g,onUpdate:async(e,a)=>{const s={name:I};return e[1]&&(s.price=+a[1]),e[2]&&(s.markup=+a[2]),await S(s)}}):d("div",{})]})}export{B as default};
